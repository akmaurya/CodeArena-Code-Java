/*
 * DialogForChooseStatus.java
 *
 * Created on January 15, 2011, 11:24 AM
 */

//package medretail;
import java.rmi.*;
/**
 *
 * @author  z
 */
public class DialogForChooseStatus extends javax.swing.JDialog {
    
    /** Creates new form DialogForChooseStatus */
    public DialogForChooseStatus(java.awt.Frame parent, boolean modal,int orderNo) {
        super(parent, modal);
        initComponents();
        this.orderNo=orderNo;
        jLabel2.setVisible(false);
        jProgressBar1.setVisible(false);
        java.awt.Dimension dm=java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        reshape((dm.width-850)/2,(dm.height-650)/2,320,180);
        //dp.add(this);
        setVisible(true);
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {
        jLabel1 = new javax.swing.JLabel();
        jComboBox1 = new javax.swing.JComboBox();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jProgressBar1 = new javax.swing.JProgressBar();
        jLabel2 = new javax.swing.JLabel();

        getContentPane().setLayout(null);

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Choose Status");
        jLabel1.setFont(new java.awt.Font("Microsoft Sans Serif", 1, 11));
        jLabel1.setForeground(new java.awt.Color(51, 0, 51));
        jLabel1.setText("Select Status");
        getContentPane().add(jLabel1);
        jLabel1.setBounds(20, 30, 90, 20);

        jComboBox1.setFont(new java.awt.Font("Microsoft Sans Serif", 1, 12));
        jComboBox1.setForeground(new java.awt.Color(255, 0, 255));
        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Pending", "Delivered", "Cancelled" }));
        jComboBox1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jComboBox1KeyPressed(evt);
            }
        });

        getContentPane().add(jComboBox1);
        jComboBox1.setBounds(110, 30, 180, 30);

        jButton1.setBackground(new java.awt.Color(255, 255, 255));
        jButton1.setFont(new java.awt.Font("Microsoft Sans Serif", 1, 11));
        jButton1.setForeground(new java.awt.Color(0, 0, 204));
        jButton1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/createstaff.gif")));
        jButton1.setMnemonic('s');
        jButton1.setText("Choose");
        jButton1.setToolTipText("Choose Status");
        jButton1.setBorder(javax.swing.BorderFactory.createCompoundBorder(null, new javax.swing.border.LineBorder(new java.awt.Color(153, 0, 51), 3, true)));
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jButton1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jButton1KeyPressed(evt);
            }
        });

        getContentPane().add(jButton1);
        jButton1.setBounds(30, 110, 110, 30);

        jButton2.setBackground(new java.awt.Color(255, 255, 255));
        jButton2.setFont(new java.awt.Font("Microsoft Sans Serif", 1, 11));
        jButton2.setForeground(new java.awt.Color(0, 0, 204));
        jButton2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/exit.gif")));
        jButton2.setMnemonic('c');
        jButton2.setText("Close");
        jButton2.setToolTipText("Close");
        jButton2.setBorder(javax.swing.BorderFactory.createCompoundBorder(null, new javax.swing.border.LineBorder(new java.awt.Color(153, 0, 51), 3, true)));
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });
        jButton2.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jButton2KeyPressed(evt);
            }
        });

        getContentPane().add(jButton2);
        jButton2.setBounds(170, 110, 110, 30);

        jProgressBar1.setBackground(new java.awt.Color(0, 255, 255));
        jProgressBar1.setForeground(new java.awt.Color(204, 0, 51));
        jProgressBar1.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 255, 51), 1, true));
        getContentPane().add(jProgressBar1);
        jProgressBar1.setBounds(10, 86, 290, 10);

        jLabel2.setFont(new java.awt.Font("Microsoft Sans Serif", 0, 10));
        jLabel2.setForeground(new java.awt.Color(255, 0, 0));
        jLabel2.setText("Please wait............");
        getContentPane().add(jLabel2);
        jLabel2.setBounds(10, 70, 140, 13);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jComboBox1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jComboBox1KeyPressed
// TODO add your handling code here:
        if(evt.getKeyCode()==10)
        {
            jButton1.requestFocus();
        }
    }//GEN-LAST:event_jComboBox1KeyPressed

    private void jButton2KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jButton2KeyPressed
// TODO add your handling code here:
        if(evt.getKeyCode()==10)
        {
            dispose();
        }
    }//GEN-LAST:event_jButton2KeyPressed

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
// TODO add your handling code here:
        dispose();
    }//GEN-LAST:event_jButton2ActionPerformed

    private void jButton1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jButton1KeyPressed
// TODO add your handling code here:
        if(evt.getKeyCode()==10)
        {
            ActionOfButton1();
        }
    }//GEN-LAST:event_jButton1KeyPressed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
// TODO add your handling code here:
        ActionOfButton1();
    }//GEN-LAST:event_jButton1ActionPerformed
    private void ActionOfButton1()
	{
		try
		{
			ZedInterface inf=null;
ZedInterfaceForMedical ut=null;
try
{
	inf=(ZedInterface)Naming.lookup(getIPaddress.IP());
	ut=(ZedInterfaceForMedical)Naming.lookup(getIPaddress.IP());
}
catch(Exception e)
{
	System.out.println("Error with connection with server "+getIPaddress.IP()+" ...");
	getIPaddress.changeIP();
	try
	{
		inf=(ZedInterface)Naming.lookup(getIPaddress.IP());
		ut=(ZedInterfaceForMedical)Naming.lookup(getIPaddress.IP());
	}
	catch(Exception ex)
	{
		System.out.println("Error with connection with server  rmi://127.0.0.1/ExtendZedServer...");
	}
}
			int status=jComboBox1.getSelectedIndex();
                        if(status!=-1)
                        {
                            //utilityClass ut=new utilityClass();
                            String query="update orderSmry set status="+status+" where oNo="+orderNo+"";
                            ut.saveOrUpdateResultSet(query);
                            status=-1;
                        }
                        task5 t=new task5();
                        t.start();
                        //while(t.isAlive()){}
			//dispose();
		}
		catch(Exception s)
		{
			System.out.println("Error in ActionOfButton1 method in DialogForChooseStaus class..."+s);
		}
	
	}
    
      class task5 extends Thread
  {
       
       public void run()
       {
         jLabel2.setVisible(true);
         jProgressBar1.setVisible(true);
         System.out.println("In....");
         for(int i=1;i<=100;i++)
           {    
                 try
                 {
                     jProgressBar1.setValue(i);
                     Thread.sleep(20);
                     System.out.println("i="+i);
                 }
                catch(Exception Ex)
                 {
                     System.out.println("error found...."+Ex);
                 }
           }
         jLabel2.setVisible(false);
         jProgressBar1.setVisible(false);
         dispose();
         System.out.println("Out....");
       }
       
  }
    /**
     * @param args the command line arguments
     */
   /* public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new DialogForChooseStatus(new javax.swing.JFrame(), true).setVisible(true);
            }
        });
    }*/
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JProgressBar jProgressBar1;
    // End of variables declaration//GEN-END:variables
 int orderNo;   
}
